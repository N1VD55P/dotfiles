# ============================================
# Prefix Configuration
# ============================================
# Set prefix to Ctrl-a instead of Ctrl-b
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# ============================================
# General Settings
# ============================================
# Enable mouse support
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer size
set -g history-limit 50000

# Vi mode for navigation
setw -g mode-keys vi

# Clipboard integration
set -g set-clipboard on

# Focus events enabled for terminals that support them
set -g focus-events on

# ============================================
# Key Bindings
# ============================================
# Reload config without restarting tmux
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# Split panes using '|' and '-'
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# Cycle through pane layouts using Prefix + Space
bind Space next-layout

# Move focus to the next pane using Ctrl + p
bind -n C-p select-pane -t :.+

# Toggle pane zoom with Ctrl + f
bind -n C-f resize-pane -Z

# Close the current pane with Prefix + X
bind X kill-pane

# Create a new window with Prefix + O
bind o new-window

# Cycle through windows with Ctrl + O
bind -n C-o next-window

# ============================================
# Status Bar Customization
# ============================================
set -g status-bg colour235
set -g status-fg colour136
set -g status-left "#[bg=green,fg=black] #S #[bg=black,fg=green]"
set -g status-right "#[bg=black,fg=green]#[bg=green,fg=black] %Y-%m-%d %H:%M | Continuum: #{continuum_status} "
set -g status-right-length 100

# Inactive/Active window style
set -g window-status-format "#[fg=grey,bg=black] #I:#W "
set -g window-status-current-format "#[fg=white,bg=black,bold] #I:#W "
set -g window-status-current-style fg=green,bg=black,bold

# ============================================
# Plugin Manager (TPM)
# ============================================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'

# ============================================
# Resurrect Settings
# ============================================
# Capture pane contents (terminal output)
set -g @resurrect-capture-pane-contents 'on'

# Save vim/nvim sessions (if you use them)
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'

# Restore additional programs
set -g @resurrect-processes 'ssh psql mysql sqlite3 "git log"'

# Save/restore pane contents area (full or visible)
set -g @resurrect-pane-contents-area 'full'

# ============================================
# Continuum Settings (Auto-save/restore)
# ============================================
# Enable automatic restore when tmux starts
set -g @continuum-restore 'on'

# Auto-save interval in minutes
# Combined with hooks in resurrect.tmux, you get:
# - Periodic saves every 5 minutes (continuum)
# - Immediate saves on window/pane close (hooks)
set -g @continuum-save-interval '5'

# Customize continuum status display in status bar
set -g @continuum-status-on-wrap-style '#[fg=green,bold]#{value}m#[fg=white,nobold]'
set -g @continuum-status-off-wrap-style '#[fg=yellow,bold]#{value}#[fg=white,nobold]'


# ============================================
# Initialize TMUX Plugin Manager
# ============================================
# Keep this line at the very bottom of tmux.conf
run-shell "bash ~/.tmux/plugins/tpm/tpm"
